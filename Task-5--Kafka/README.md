# üìß Email Service (Kafka + Elasticsearch)

–°–µ—Ä–≤—ñ—Å –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∏—Ö –ª–∏—Å—Ç—ñ–≤, —è–∫–∏–π –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ Kafka, –∑–±–µ—Ä—ñ–≥–∞—î —ñ—Å—Ç–æ—Ä—ñ—é –≤ Elasticsearch —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î –ª–∏—Å—Ç–∏ —á–µ—Ä–µ–∑ SMTP (Mailtrap).

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫
* **Java / Spring Boot 3**
* **Apache Kafka** (Consumer)
* **Elasticsearch & Kibana** (–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è)
* **Docker & Docker Compose**
* **Mailtrap** (SMTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

---

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç
Y –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É —Ñ–∞–π–ª `.env` –¥–æ–¥–∞–π—Ç–µ –≤–∞—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Mailtrap (–∞–±–æ —ñ–Ω—à–æ–≥–æ SMTP-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞):
```env
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=–≤–∞—à_username
MAIL_PASSWORD=–≤–∞—à_password
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
–©–æ–± –ø—ñ–¥–Ω—è—Ç–∏ –≤—Å—é —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ —Å–∞–º —Å–µ—Ä–≤—ñ—Å –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é, –≤–∏–∫–æ–Ω–∞–π—Ç–µ
```bash
docker-compose up --build
```
### 3. –ó–∞–ø—É—Å–∫ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
–Ø–∫—â–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫–æ–¥ –≤ IDE —Ç–æ:
```bash
docker stop email-service
```
—â–æ–± –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ –ø–æ—Ä—Ç 8081, —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ 

## üîç –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–∞–Ω–∏—Ö —É Kibana

–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ —Å–µ—Ä–≤—ñ—Å –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å –∞–±–æ –∑–±–µ—Ä–µ–∂–µ –ø–µ—Ä—à–∏–π –ª–∏—Å—Ç –≤ Elasticsearch, –≤–∏–∫–æ–Ω–∞–π—Ç–µ —Ü—ñ –∫—Ä–æ–∫–∏, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –¥–∞–Ω—ñ –≤ Kibana:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Kibana** –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:5601`.
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –º–µ–Ω—é: **Management** -> **Stack Management**.
3. –û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª **Data Views**.
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create data view**.
5. –£ –ø–æ–ª—ñ **Name** –≤–∫–∞–∂—ñ—Ç—å: `email-messages*`.
6. –û–±–µ—Ä—ñ—Ç—å –ø–æ–ª–µ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞ —á–∞—Å–æ–º.
7. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Save data view to Kibana**.

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–æ–∑–¥—ñ–ª **Analytics** -> **Discover**, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–∞—à—ñ –ª–∏—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

## üìä –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏:

| –°–µ—Ä–≤—ñ—Å | –ê–¥—Ä–µ—Å–∞ | –û–ø–∏—Å |
| :--- | :--- | :--- |
| **Email Service** | `http://localhost:8081` | Spring Boot –¥–æ–¥–∞—Ç–æ–∫ (REST API —Ç–∞ Kafka Consumer) |
| **Elasticsearch** | `http://localhost:9200` | –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏—Ö –ª–∏—Å—Ç—ñ–≤ |
| **Kibana** | `http://localhost:5601` | –í—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö Elastic |
| **Zookeeper** | `http://localhost:2181` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka |
